<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактор фильмов</title>
    <link rel="stylesheet" href="/css/styles.css"/>
</head>
<body>
<header class="section header">
    <h1>Редактор фильмов</h1>
</header>
<div class="section content">
    <div class="items smallItems">
        <div class="form-row">
            <label for="chooseMovie"></label>
            <select size="1" id="chooseMovie" name="chooseMovie"></select>

            <script>
                const chooseMovieOptions = ['вяз 1', 'вяз2 ', 'вяз бесконечность'];

                const chooseMovieSelectElement = document.getElementById('chooseMovie');

                chooseMovieOptions.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.text = option;
                    chooseMovieSelectElement.add(optionElement);
                });
            </script>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <a th:href="@{/film/editor/{id}(id=${firstId})}">
                    <button id="flash-back">
                        <img src="/images/flash-back.png" width="30" alt="к первому"/>
                    </button>
                </a>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <a th:href="@{/film/editor/{id}(id=${prevId})}">
                    <button id="back">
                        <img src="/images/back.png" width="30" alt="предыдущий"/>
                    </button>
                </a>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <button id="save"><img src="/images/save.png" width="30" alt="сохранить"/></button>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <a th:href="@{/film/editor/{id}(id=${nextId})}">
                    <button id="forward"><img src="/images/forward.png" width="30" alt="следующий"/></button>
                </a>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <a th:href="@{/film/editor/{id}(id=${lastId})}">
                    <button id="flash-forward"><img src="/images/flash-forward.png" width="30" alt="к последнему"/>
                    </button>
                </a>
            </div>
        </div>
        <hr/>
        <div class="form-row">
            <div class="button-wrapper">
                <a th:href="@{/film/editor/{id}(id=0)}">
                    <button id="new-movie" class="carte">Новый фильм</button>
                </a>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <button id="delete-movie" class="carte">Удалить</button>
            </div>
        </div>
        <div class="form-row">
            <div class="button-wrapper">
                <button id="menu" class="carte" onclick="location.href='/'">Меню</button>
            </div>
        </div>
    </div>

    <div class="items">
        <div class="form-row">
            <label for="movieID">id</label>
            <p id="movieId"><span th:text="${film.id}"></span></p>
        </div>
        <div class="form-row">
            <label for="title">title</label>
            <input id="title" name="title" type="text" th:field="${film.title}"/>
        </div>
        <div class="form-row">
            <label for="description">description</label>
            <textarea id="description" name="description" th:field="${film.description}"></textarea>
        </div>
        <div class="form-row">
            <label for="duration">duration</label>
            <input id="duration" name="duration" type="number" th:field="${film.duration}"/>
        </div>
        <div class="form-row">
            <label for="box-office">box-office</label>
            <input id="box-office" name="box-office" type="number" th:field="${film.totalBoxOffice}"/>
        </div>
        <div class="form-row">
            <label for="budget">budget</label>
            <input id="budget" name="budget" type="number" th:field="${film.budget}"/>
        </div>
        <div class="form-row">
            <label for="release-date">release-date</label>
            <input id="release-date" name="release-date" type="date" th:field="${film.releaseDate}"/>
        </div>
        <div class="form-row">
            <label for="country">country</label>
            <select size="1" id="country" name="country">
                <option th:value="0">Выбрать</option>
                <option th:each="country : ${countries}"
                        th:value="${country.id}"
                        th:selected="${country.id == film.country.id}"
                        th:text="${country.id}+'. '+${country.title}">
                </option>
            </select>
            <button type="button" onclick="addOption()">+</button>
        </div>
        <div class="form-row">
            <label for="genre">genre</label>
            <select size="1" id="genre" name="genre">
                <option th:value="0">Выбрать</option>
                <option th:each="genre : ${genres}"
                        th:value="${genre.id}"
                        th:selected="${genre.id == film.genre.id}"
                        th:text="${genre.id}+'. '+${genre.title}">
                </option>
            </select>
            <button type="button" onclick="addOption()">+</button>
        </div>
        <div class="form-row">
            <label for="ageLimit">age limit</label>
            <select size="1" id="ageLimit" name="ageLimit">
                <option th:value="0">Выбрать</option>
                <option th:each="ageLimit : ${age_limits}"
                        th:value="${ageLimit.id}"
                        th:selected="${ageLimit.id == film.ageLimit.id}"
                        th:text="${ageLimit.id}+'. '+${ageLimit.category}">
                </option>
            </select>
            <button type="button" onclick="addOption()">+</button>
        </div>
        <div class="form-row">
            <label for="quality">quality</label>
            <select size="1" id="quality" name="quality">
                <option th:value="0">Выбрать</option>
                <option th:each="quality : ${qualities}"
                        th:value="${quality.id}"
                        th:selected="${quality.id == film.quality.id}"
                        th:text="${quality.id}+'. '+${quality.type}">
                </option>
            </select>
            <button type="button" onclick="addOption()">+</button>
        </div>


        <!-- Поле с persons-->

        <div class="multipleSelect">
            <!-- Список с выбором опций -->
            <div class="form-row">
                <label for="selectOptions">persons</label>
                <select size="1" id="selectOptions"></select>
                <!-- Кнопка для добавления новой опции, сюда подвязываешь свой prompt для функции addOption -->
                <button type="button" onclick="addOption()">+</button>
            </div>
            <!-- Выведенные строки выбранных опций -->
            <div class="form-row">
                <ul id="selectedOptions"></ul>
            </div>
            <script>
                // Массив для хранения всех опций
                const options = ['option1', 'option2', 'option3'];  // Тут указан типовой пример содержимого
                // Элемент селекта
                const selectElement = document.getElementById('selectOptions');
                // Элемент списка выбранных опций
                const selectedOptionsElement = document.getElementById('selectedOptions');
                // Массив выбранных опций
                const selectedOptions = [];

                // Добавляем существующие опции в селект
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.text = option;
                    selectElement.add(optionElement);
                });

                // Добавляем выбранную опцию
                function addSelectedOption() {
                    const selectedOptionsList = document.createElement('li');
                    const selectedOption = selectElement.value;
                    if (selectedOption && !selectedOptions.includes(selectedOption)) {
                        selectedOptions.push(selectedOption);
                        selectedOptionsList.innerHTML = `${selectedOption} <button onclick="removeSelectedOption('${selectedOption}')">x</button>`;
                        selectedOptionsElement.appendChild(selectedOptionsList);
                    }
                }

                // Удаляем выбранную опцию
                function removeSelectedOption(selectedOption) {
                    const optionIndex = selectedOptions.indexOf(selectedOption);
                    if (optionIndex > -1) {
                        selectedOptions.splice(optionIndex, 1);
                        const selectedOptionList = selectedOptionsElement.querySelectorAll('li');
                        selectedOptionList[optionIndex].remove();
                    }
                }

                // Обновляем событие изменения выбора опции
                selectElement.addEventListener('change', () => {
                    addSelectedOption();
                });
            </script>

        </div>
    </div>
</div>
</body>
</html>

